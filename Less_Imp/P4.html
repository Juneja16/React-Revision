<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM Performance Comparison</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        color: #fff;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        padding: 20px;
      }
      h1 {
        text-align: center;
        margin-bottom: 20px;
      }
      .demo-content {
        display: flex;
        gap: 40px;
        justify-content: center;
        flex-wrap: wrap;
      }
      .section {
        flex: 1;
        min-width: 320px;
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
      }
      .boxes {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        justify-content: center;
        margin-bottom: 10px;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
      }
      .box {
        width: 28px;
        height: 28px;
        text-align: center;
        line-height: 28px;
        border-radius: 5px;
        font-size: 0.75rem;
      }
      .browser-box {
        background: rgba(255, 100, 100, 0.3);
      }
      .react-box {
        background: rgba(100, 255, 100, 0.3);
      }
      .time {
        font-style: italic;
        margin-top: 10px;
      }
      .clock {
        text-align: center;
        font-size: 2rem;
        margin-top: 40px;
        padding: 15px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 12px;
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
      }
      .fps {
        text-align: center;
        margin-top: 20px;
        font-size: 1.2rem;
        background: rgba(0, 0, 0, 0.4);
        display: inline-block;
        padding: 10px 20px;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Browser DOM vs React Virtual DOM (Auto Update Every Second)</h1>

    <div class="demo-content">
      <!-- Browser DOM Section -->
      <div class="section">
        <h2>Browser DOM</h2>
        <div id="real-container" class="boxes"></div>
        <p id="real-time" class="time"></p>
      </div>

      <!-- React Virtual DOM Section -->
      <div id="react-root" class="section"></div>
    </div>

    <!-- Digital Clock -->
    <div id="clock" class="clock"></div>

    <!-- FPS Monitor -->
    <div id="fps-display" class="fps">FPS: Calculating...</div>

    <script type="text/babel">
      function VirtualBoxes() {
        const [boxes, setBoxes] = React.useState(Array(500).fill(0));
        const [time, setTime] = React.useState(0);

        React.useEffect(() => {
          const interval = setInterval(() => {
            const start = performance.now();
            setBoxes((prev) => prev.map((x) => x + 1));
            const end = performance.now();
            setTime((end - start).toFixed(4));
          }, 1000);
          return () => clearInterval(interval);
        }, []);

        return (
          <div>
            <h2>Virtual DOM</h2>
            <div className="boxes">
              {boxes.map((val, i) => (
                <div key={i} className="box react-box">
                  {val}
                </div>
              ))}
            </div>
            <p className="time">Update time: {time} ms</p>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("react-root"));
      root.render(<VirtualBoxes />);
    </script>

    <script>
      // Real DOM Auto Update
      let realValues = Array(500).fill(0);
      const realContainer = document.getElementById("real-container");

      // Initialize boxes
      realValues.forEach((val, i) => {
        const box = document.createElement("div");
        box.textContent = val;
        box.className = "box browser-box";
        realContainer.appendChild(box);
      });

      setInterval(() => {
        const start = performance.now();
        realValues = realValues.map((x) => x + 1);
        const children = realContainer.children;
        for (let i = 0; i < children.length; i++) {
          children[i].textContent = realValues[i];
        }
        const end = performance.now();
        document.getElementById("real-time").textContent =
          "Update time: " + (end - start).toFixed(4) + " ms";
      }, 1000);

      // Digital Clock
      function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString();
        document.getElementById("clock").textContent = "ðŸ•’ " + timeString;
      }
      setInterval(updateClock, 1000);
      updateClock(); // Initial call

      // FPS Monitor
      let fps,
        lastFrame = performance.now(),
        frames = 0;
      function fpsLoop(now) {
        frames++;
        if (now - lastFrame >= 1000) {
          fps = frames;
          document.getElementById("fps-display").textContent = "FPS: " + fps;
          frames = 0;
          lastFrame = now;
        }
        requestAnimationFrame(fpsLoop);
      }
      requestAnimationFrame(fpsLoop);
    </script>
  </body>
</html>
